
<div id="translation">
<div class="translation text">{{Spanish}}</div>
<div class="examples-es examples-es--back">{{examples-es}}</div>
</div>


<div id="word-dictionaries-container"></div>

<div class="info">{{Chapter}}{{#Topic}}::{{Topic}}{{/Topic}}{{#Section}}::{{Section}}{{/Section}}</div>

<p class="ru">{{russian}}</p>

{{#Prompt}}
{{#Image}}
  <div class="prompt">{{Prompt}}</div>
{{/Image}}
{{/Prompt}}

{{#Image}}
<div>{{Image}}</div>
{{#Spanish}}
<div class="english text hint">{{English}}</div>
{{/Spanish}}
{{^Spanish}}
<div class="english text hint no-translation">{{English}}</div>
{{/Spanish}}
<div class="english audio">{{Audio English}}</div>
{{/Image}}

{{^Image}}
{{#Spanish}}
<div class="english text">{{English}}</div>
{{/Spanish}}
{{^Spanish}}
<div class="english text no-translation">{{English}}</div>
{{/Spanish}}
<div class="english audio">{{Audio English}}</div>
{{/Image}}




<hr>
<div class="xdxf">{{ru-goldedict}}</div>

<div class="conjugations">{{conjugations-table}}</div>

      <div class="word-dictionaries-container--container">
        <div id="word-dictionaries-container--etimologias-es">{{etymology}}</div>
        <div id="word-dictionaries-container--etimologias-ru">{{etymology-translation}}</div>
      </div>



<script>
;(function() { try {
const play = (type, text) => {
  if (text) {
  console.log('playing', text)
    AnkiDroidJS.ankiTtsSetLanguage(type)
    AnkiDroidJS.ankiTtsSpeak(text, 1)
  }
}
play('es', Array.from(document.querySelectorAll('.example-sentence-translation-es')).map(x => x.textContent).join('\n'))
} catch (e) { console.error(e) }
});

;(function() {
  const zip = (a, b) => a.map((k, i) => [k, b[i]]);
  const zipWith = (f, a, b) => a.map((k, i) => f(k, b[i]));
  const getElementByIdRequired = (id) => {
    const element = document.getElementById(id)
    if (!element) { throw new Error(`no #${id}`) }
    return element
  }

  const userDictionaryFromLanguageReactor_urls = ` https://www.babla.ru/%D1%81%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F/%D0%B8%D1%81%D0%BF%D0%B0%D0%BD%D1%81%D0%BA%D0%B8%D0%B9/WORD

https://conjugator.reverso.net/conjugation-spanish-verb-WORD.html

https://en.bab.la/dictionary/spanish-english/WORD

https://dictionary.reverso.net/spanish-english/WORD

https://www.lingvolive.com/ru-ru/translate/es-ru/WORD

abbyy.lingvo://show_word/WORD
 http://localhost:34567/search.html?q=WORD
 https://etimologias.dechile.net/?WORD

https://en.m.wiktionary.org/wiki/WORD
http://www.spanishdict.com/translate/WORD
https://tatoeba.org/es/sentences/search?from=spa&query=WORD&to=rus
  `.trim().split('\n').map(x => x.trim()).filter(x => x)

  const userDictionaryFromLanguageReactor_names = `
  conjucations babla
conjugations rev
  dict babla
dict rev
abbyy
abbyy offline
  search
  etimology
wiki
spanishdict
tatoeba
  `.trim().split('\n').map(x => x.trim()).filter(x => x)

  const userDictionaryFromLanguageReactor = zipWith((url, name) => ({ url, name }), userDictionaryFromLanguageReactor_urls, userDictionaryFromLanguageReactor_names)

  const inputId = "translation"
  const containerId = "word-dictionaries-container"

  window.renderInContainer = function(spanishWord) {
    const html = userDictionaryFromLanguageReactor.map(({ url, name }) => {
      return `<a target="_blank" href="${url.replace('WORD', encodeURIComponent(spanishWord))}">${name}</a>`
    }).join(', ')
    getElementByIdRequired(containerId).innerHTML = `${spanishWord}: ${html}`
  }

  const inputComponent = getElementByIdRequired(inputId)

function addClicks(element) {
  let text = element.textContent
  text = text.replace(/[áàãâéèêíìîõóòôúùûñ\w]+/gi, match => `<span onclick="window.renderInContainer('${match}')">${match}</span>`)
  element.innerHTML = text
}

[inputComponent.querySelector('.translation'), ...inputComponent.querySelectorAll('.example-sentence-translation-es')].forEach(addClicks)

window.renderInContainer(inputComponent.querySelector('span').textContent)
})();

</script>

